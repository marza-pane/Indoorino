/*
 * packetPgm.h
 *
 *  Created on: Apr 25, 2020
 *   Edited on: May 02, 2020 - 01:48:17
 *      Author: n00b
 */

#ifndef PACKETPGM_H_
#define PACKETPGM_H_

#include "comtable.h"
#include "definitions.h"
#define VARMAP_NUMBER 30

//    ________________________________________________________________________
//    |                                                                      |
//    |    mapped variables                                                  |
//    |______________________________________________________________________|
//

/*
 * possible types for varmap_template are:
 *
 * c = char *
 * s = uint8_t
 * l = uint32_t
 * u = uint16_t
 * n = int16
 *
*/

struct varmap_template
{
	char           type;
	ibasize_t      size;
	char           name[LEN_FIELD];
};

const varmap_template VarTable[VARMAP_NUMBER] PROGMEM = {

	{ 'c',	SERIAL_TX_BUFFER_SIZE , "message"              },	/*   0 */
	{ 'c',	SERIAL_TX_BUFFER_SIZE , "command"              },	/*   1 */
	{ 'c',	LEN_NAME              , "name"                 },	/*   2 */
	{ 'c',	LEN_NAME              , "type"                 },	/*   3 */
	{ 'c',	LEN_NAME              , "board"                },	/*   4 */
	{ 'c',	LEN_DEVNAME           , "devname"              },	/*   5 */
	{ 'l',	sizeof(uint32_t)      , "epoch"                },	/*   6 */
	{ 'l',	sizeof(uint32_t)      , "value"                },	/*   7 */
	{ 'l',	sizeof(uint32_t)      , "freemem"              },	/*   8 */
	{ 'l',	sizeof(uint32_t)      , "looptime"             },	/*   9 */
	{ 'l',	sizeof(uint32_t)      , "errors"               },	/*  10 */
	{ 'l',	sizeof(uint32_t)      , "totalrx"              },	/*  11 */
	{ 'l',	sizeof(uint32_t)      , "totaltx"              },	/*  12 */
	{ 'l',	sizeof(uint32_t)      , "serialrx"             },	/*  13 */
	{ 'l',	sizeof(uint32_t)      , "serialtx"             },	/*  14 */
	{ 'l',	sizeof(uint32_t)      , "param1"               },	/*  15 */
	{ 'l',	sizeof(uint32_t)      , "param2"               },	/*  16 */
	{ 'l',	sizeof(uint32_t)      , "param3"               },	/*  17 */
	{ 'l',	sizeof(uint32_t)      , "param4"               },	/*  18 */
	{ 'l',	sizeof(uint32_t)      , "temperature"          },	/*  19 */
	{ 'l',	sizeof(uint32_t)      , "humidity"             },	/*  20 */
	{ 'l',	sizeof(uint32_t)      , "stepday1"             },	/*  21 */
	{ 'l',	sizeof(uint32_t)      , "stephour1"            },	/*  22 */
	{ 'l',	sizeof(uint32_t)      , "timeout"              },	/*  23 */
	{ 'l',	sizeof(uint32_t)      , "port"                 },	/*  24 */
	{ 's',	sizeof(uint8_t)       , "level"                },	/*  25 */
	{ 's',	sizeof(uint8_t)       , "status"               },	/*  26 */
	{ 's',	sizeof(uint8_t)       , "devnum"               },	/*  27 */
	{ 's',	sizeof(uint8_t)       , "pin"                  },	/*  28 */
	{ 'c',	LEN_IPADDRESS         , "ip"                   }	/*  29 */
};

//    ________________________________________________________________________
//    |                                                                      |
//    |    mapped packet                                                     |
//    |______________________________________________________________________|
//

struct packetmap_template
{
	ibacomm_t      comm  ;
	ibavar_t       fields;
	char           label [LEN_LABEL];
	ibavar_t       var   [MAX_PACKET_ENTRIES];
};


const packetmap_template PackeTable[TOTAL_IBACOM] PROGMEM = {


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 000 - IBACOM_NONE - empty packet                         |
//    |______________________________________________________________________|
//
	{
		IBACOM_NONE, 0,
		"empty packet", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 001 - IBACOM_INIT - init byte                            |
//    |______________________________________________________________________|
//
	{
		IBACOM_INIT, 0,
		"init byte", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 002 - IBACOM_RESET - reset command                       |
//    |______________________________________________________________________|
//
	{
		IBACOM_RESET, 0,
		"reset command", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 003 - IBACOM_REQUEST_CONFIG - config request             |
//    |______________________________________________________________________|
//
	{
		IBACOM_REQUEST_CONFIG, 0,
		"config request", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 004 - IBACOM_REQUEST_STATUS - status request             |
//    |______________________________________________________________________|
//
	{
		IBACOM_REQUEST_STATUS, 0,
		"status request", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 005 - IBACOM_COMMAND_STRING - command string             |
//    |______________________________________________________________________|
//
	{
		IBACOM_COMMAND_STRING, 1,
		"command string", { 1 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 010 - IBACOM_UNIX_EPOCH - timestamp                      |
//    |______________________________________________________________________|
//
	{
		IBACOM_UNIX_EPOCH, 1,
		"timestamp", { 6 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 015 - IBACOM_REPORT - generic report                     |
//    |______________________________________________________________________|
//
	{
		IBACOM_REPORT, 4,
		"generic report", { 0, 2, 6, 25 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 025 - IBACOM_ACK - acknowledge                           |
//    |______________________________________________________________________|
//
	{
		IBACOM_ACK, 1,
		"acknowledge", { 7 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 030 - IBACOM_RESET_CONFIG - factory reset                |
//    |______________________________________________________________________|
//
	{
		IBACOM_RESET_CONFIG, 0,
		"factory reset", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 301 - IBACOM_SET_SD - sd card setting                    |
//    |______________________________________________________________________|
//
	{
		IBACOM_SET_SD, 1,
		"sd card setting", { 1 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 501 - IBACOM_SET_DEVICE - device setting                 |
//    |______________________________________________________________________|
//
	{
		IBACOM_SET_DEVICE, 4,
		"device setting", { 1, 5, 28, 25 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1001 - IBACOM_CONF_STD - standard conf                   |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_STD, 4,
		"standard conf", { 2, 3, 4, 27 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1003 - IBACOM_CONF_ESP - esp conf                        |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_ESP, 4,
		"esp conf", { 29, 24, 23, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1005 - IBACOM_CONF_SAMPLER - sampler conf                |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_SAMPLER, 2,
		"sampler conf", { 21, 22 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1301 - IBACOM_CONF_ASENSOR - analog sensor conf          |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_ASENSOR, 4,
		"analog sensor conf", { 5, 28, 15, 16 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1302 - IBACOM_CONF_SWITCH - switch conf                  |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_SWITCH, 2,
		"switch conf", { 5, 28 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1310 - IBACOM_CONF_LDR - ldr sensor conf                 |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_LDR, 4,
		"ldr sensor conf", { 5, 28, 15, 16 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1522 - IBACOM_CONF_DHT22 - DHT22 sensor conf             |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_DHT22, 6,
		"DHT22 sensor conf", { 5, 28, 15, 16, 17, 18 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 1700 - IBACOM_CONF_RELAY - relay conf                    |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_RELAY, 3,
		"relay conf", { 5, 28, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2000 - IBACOM_CONF_DEVSTD - device generic conf          |
//    |______________________________________________________________________|
//
	{
		IBACOM_CONF_DEVSTD, 2,
		"device generic conf", { 5, 28 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2001 - IBACOM_STATUS_STD - standard status               |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_STD, 5,
		"standard status", { 2, 6, 9, 8, 10 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2003 - IBACOM_STATUS_ESP - esp status                    |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_ESP, 5,
		"esp status", { 7, 12, 11, 14, 13 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2005 - IBACOM_STATUS_SAMPLER - sampler status            |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_SAMPLER, 3,
		"sampler status", { 2, 21, 7 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2301 - IBACOM_STATUS_ASENSOR - analog sensor stat        |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_ASENSOR, 3,
		"analog sensor stat", { 5, 7, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2302 - IBACOM_STATUS_SWITCH - switch sensor stat         |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_SWITCH, 3,
		"switch sensor stat", { 5, 7, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2310 - IBACOM_STATUS_LDR - ldr sensor stat               |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_LDR, 3,
		"ldr sensor stat", { 5, 7, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2522 - IBACOM_STATUS_DHT22 - DHT22 sensor stat           |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_DHT22, 4,
		"DHT22 sensor stat", { 5, 19, 20, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2700 - IBACOM_STATUS_RELAY - relay stat                  |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_RELAY, 2,
		"relay stat", { 5, 25 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 2880 - IBACOM_STATUS_SD - sd statistics                  |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_SD, 4,
		"sd statistics", { 2, 28, 15, 8 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 3000 - IBACOM_STATUS_DEVSTD - device generic stat        |
//    |______________________________________________________________________|
//
	{
		IBACOM_STATUS_DEVSTD, 2,
		"device generic stat", { 5, 26 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 3001 - IBACOM_ALLARM - allarm                            |
//    |______________________________________________________________________|
//
	{
		IBACOM_ALLARM, 4,
		"allarm", { 3, 4, 6, 25 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 3002 - IBACOM_WARNINGS - general warning                 |
//    |______________________________________________________________________|
//
	{
		IBACOM_WARNINGS, 4,
		"general warning", { 3, 4, 6, 25 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 3205 - IBACOM_REQUEST_PROBE - probe request              |
//    |______________________________________________________________________|
//
	{
		IBACOM_REQUEST_PROBE, 0,
		"probe request", {}
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 3505 - IBACOM_PROBE_AMBIENT - ambient probe              |
//    |______________________________________________________________________|
//
	{
		IBACOM_PROBE_AMBIENT, 4,
		"ambient probe", { 5, 3, 6, 7 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 5001 - IBACOM_SET_ADDR - network address set             |
//    |______________________________________________________________________|
//
	{
		IBACOM_SET_ADDR, 4,
		"network address set", { 1, 5, 29, 24 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 5002 - IBACOM_ESP_ADDRESS - esp address                  |
//    |______________________________________________________________________|
//
	{
		IBACOM_ESP_ADDRESS, 3,
		"esp address", { 5, 29, 24 }
	},


//    ________________________________________________________________________
//    |                                                                      |
//    |    IBACOM - 65530 - IBACOM_DOORBELL - doorbell signal                |
//    |______________________________________________________________________|
//
	{
		IBACOM_DOORBELL, 1,
		"doorbell signal", { 5 }
	}
};

#endif  /* PACKETPGM_H_ */
